<!doctype html> 
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LOTUS MUSIC ¬∑ VK DIGITAL-–û–¢–ß–Å–¢ (MVP)</title>
  <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <link rel="preload" as="image" href="assets/logo_black.png" />
</head>
<body>
  <div id="loginOverlay" class="loginOverlay">
  <div class="loginCard">
    <div class="loginTitle">–í—Ö–æ–¥ –≤ —Å–µ—Ä–≤–∏—Å</div>

    <label class="loginLabel">–õ–æ–≥–∏–Ω</label>
    <input id="loginUser" class="loginInput" type="text" />

    <label class="loginLabel">–ü–∞—Ä–æ–ª—å</label>
<div class="loginPassWrap">
  <input id="loginPass" class="loginInput" type="password" />
  <button type="button" id="togglePass" class="loginEye">üëÅ</button>
</div>

    <div id="loginError" class="loginError" style="display:none;"></div>

    <button id="loginBtn" class="loginBtn">–í–æ–π—Ç–∏</button>
  </div>
</div>
  <header class="topbar">
    <div class="brand">
  <img class="logoImg" src="assets/logo-mini.webp" alt="Lotus Music" />
  <div>
    <div class="brandTitle">LOTUS MUSIC ¬∑ VK DIGITAL-–û–¢–ß–Å–¢</div>
    <div class="brandSub">Yandex Cloud</div>
  </div>
</div>
    <nav class="nav">
      <button class="tabBtn active" data-route="releases">–†–µ–ª–∏–∑—ã</button>
      <button class="tabBtn" data-route="editor">–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä</button>
      <button class="tabBtn" data-route="history">–ò—Å—Ç–æ—Ä–∏—è</button>
      <button class="tabBtn" data-route="report">–û—Ç—á—ë—Ç</button>
    </nav>
  </header>

  <main class="container">
    <!-- RELEASES -->
    <section class="page active" id="page-releases">
      <div class="pageHead">
        <h1>–†–µ–ª–∏–∑—ã</h1>
        <div class="actions">
          <button class="btn primary" id="btn-new-release">+ –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–ª–∏–∑</button>
          <button class="btn" id="btn-cloud-refresh" title="–ü–æ–¥—Ç—è–Ω—É—Ç—å —Ä–µ–ª–∏–∑—ã –∏–∑ Yandex Cloud">–û–±–Ω–æ–≤–∏—Ç—å –∏–∑ –æ–±–ª–∞–∫–∞</button>
        </div>
      </div>

      <div class="card" id="new-release-card" hidden>
        <div class="cardTitle">
          <h2>–ù–æ–≤—ã–π —Ä–µ–ª–∏–∑</h2>
          <button class="iconBtn" id="btn-cancel-new-release" title="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>
        </div>
        <div class="grid cols2">
          <div class="field">
            <label>–ê—Ä—Ç–∏—Å—Ç—ã (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)</label>
            <input id="nr-artists" placeholder="EMIN, Amanda Holden" />
          </div>
          <div class="field">
            <label>–¢—Ä–µ–∫</label>
            <input id="nr-track" placeholder="Somethin' Stupid" />
          </div>
        </div>
        <div class="row" style="margin-top:12px">
          <div class="muted">–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–∞ –±—É–¥–µ—Ç: <b id="nr-title-preview">‚Äî</b></div>
          <div class="spacer"></div>
          <button class="btn" id="btn-create-release">–°–æ–∑–¥–∞—Ç—å</button>
        </div>
      </div>

      <div class="card">
        <div class="cardTitle">
          <h2>–°–ø–∏—Å–æ–∫ —Ä–µ–ª–∏–∑–æ–≤</h2>
          <span class="pill" id="releases-count">0</span>
        </div>
        <div id="releases-list" class="list"></div>
      </div>
    </section>

    <!-- EDITOR -->
    <section class="page" id="page-editor">
      <div class="pageHead">
        <h1>–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Ä–µ–ª–∏–∑–∞</h1>
        <div class="actions">
          <select id="editor-release-select"></select>
        </div>
      </div>

      <div class="cascade">

        <!-- STEP 1: META -->
        <section class="step card" id="step-meta">
          <div class="cardTitle">
            <h2>1) –†–µ–ª–∏–∑</h2>
            <span class="pill" id="pill-release-id">‚Äî</span>
          </div>

          <div class="grid cols2">
            <div class="field">
              <label>–ê—Ä—Ç–∏—Å—Ç—ã</label>
              <input id="ed-artists" />
            </div>
            <div class="field">
              <label>–¢—Ä–µ–∫</label>
              <input id="ed-track" />
            </div>
          </div>

          <div class="row" style="margin-top:12px">
            <div class="muted">–ù–∞–∑–≤–∞–Ω–∏–µ: <b id="ed-title">‚Äî</b></div>
            <div class="spacer"></div>
            <button class="btn" id="btn-save-meta">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          </div>
        </section>

        <!-- STEP 2: COVER -->
        <section class="step card" id="step-cover">
          <div class="cardTitle">
            <h2>2) –û–±–ª–æ–∂–∫–∞ —Ä–µ–ª–∏–∑–∞</h2>
            <span class="pill" id="pill-cover">–Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞</span>
          </div>

          <div class="row">
            <input type="file" id="cover-file" accept="image/png,image/jpeg,image/webp" />
            <button class="btn danger inline" id="btn-delete-cover" title="–£–¥–∞–ª–∏—Ç—å –æ–±–ª–æ–∂–∫—É" hidden>–£–¥–∞–ª–∏—Ç—å</button>
          </div>

          <div class="previewRow" id="cover-preview-wrap" hidden>
            <img id="cover-preview" class="coverPreview" alt="–û–±–ª–æ–∂–∫–∞" />
          </div>
        </section>

        <!-- STEP 3: STREAMS -->
        <section class="step card locked" id="step-streams">
          <div class="cardTitle">
            <h2>3) –°—Ç—Ä–∏–º—ã (VK) –ø–æ –¥–Ω—è–º</h2>
            <span class="pill" id="pill-streams">–Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ</span>
          </div>

          <div class="row">
            <button class="btn" id="btn-add-streams" disabled>+ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è</button>
            <button class="btn danger inline" id="btn-delete-streams" hidden>–£–¥–∞–ª–∏—Ç—å</button>
          </div>

          <div class="modal" id="streams-modal" hidden>
            <div class="modalCard">
              <div class="cardTitle">
                <h3>–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∏–º–æ–≤</h3>
                <button class="iconBtn" id="btn-close-streams-modal" title="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>
              </div>
              <div class="field">
                <label>–§–∞–π–ª .xlsx</label>
                <input type="file" id="streams-file" accept=".xlsx" />
              </div>
              <div class="hint">–û–∂–∏–¥–∞–µ–º—ã–µ –∫–æ–ª–æ–Ω–∫–∏: ¬´–î–∞—Ç–∞¬ª –∏ ¬´vk¬ª (–ª–∏—Å—Ç Chart data –∏–ª–∏ –ø–µ—Ä–≤—ã–π –ª–∏—Å—Ç).</div>

              <div class="miniTableWrap" id="streams-preview-wrap" hidden>
                <div class="miniTableTitle">–ü—Ä–µ–≤—å—é (–ø–µ—Ä–≤—ã–µ 5 —Å—Ç—Ä–æ–∫)</div>
                <table class="miniTable" id="streams-preview"></table>
              </div>

              <div class="row" style="margin-top:12px">
                <div class="spacer"></div>
                <button class="btn primary" id="btn-save-streams" disabled>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
              </div>
            </div>
          </div>
        </section>

        <!-- STEP 4: COMMUNITIES -->
        <section class="step card locked" id="step-communities">
          <div class="cardTitle">
            <h2>4) –°–æ–æ–±—â–µ—Å—Ç–≤–∞ —Ä–µ–ª–∏–∑–∞ (1..N)</h2>
            <span class="pill" id="pill-communities">0</span>
          </div>

          <div class="row">
            <button class="btn" id="btn-add-community" disabled>+ –î–æ–±–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ—Å—Ç–≤–æ</button>
          </div>

          <div class="modal" id="community-modal" hidden>
            <div class="modalCard">
              <div class="cardTitle">
                <h3>–ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ</h3>
                <button class="iconBtn" id="btn-close-community-modal" title="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>
              </div>
              <div class="grid cols2">
                <div class="field">
                  <label>–ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞</label>
                  <input id="cm-name" placeholder="VK: Artist Official" />
                </div>
                <div class="field">
                  <label>ID —Å–æ–æ–±—â–µ—Å—Ç–≤–∞</label>
                  <input id="cm-vkId" placeholder="123456789" />
                </div>
              </div>
              <div class="row" style="margin-top:12px">
                <div class="spacer"></div>
                <button class="btn primary" id="btn-save-community">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
              </div>
            </div>
          </div>

          <div id="communities-list" class="stack"></div>
        </section>

        <!-- STEP 5: BUILD -->
        <section class="step card locked" id="step-build">
          <div class="cardTitle">
            <h2>5) –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç</h2>
            <span class="pill" id="pill-ready">–Ω–µ –≥–æ—Ç–æ–≤</span>
          </div>

          <div class="row">
            <button class="btn primary" id="btn-build-report" disabled>–°–æ–∑–¥–∞—Ç—å –æ—Ç—á—ë—Ç</button>
            <button class="btn" id="btn-open-report" disabled>–û—Ç–∫—Ä—ã—Ç—å –æ—Ç—á—ë—Ç</button>
            <div class="spacer"></div>
            <button class="btn danger inline" id="btn-delete-release">–£–¥–∞–ª–∏—Ç—å —Ä–µ–ª–∏–∑‚Ä¶</button>
          </div>
        </section>

      </div>
    </section>

    <!-- HISTORY -->
    <section class="page" id="page-history">
      <div class="pageHead">
        <h1>–ò—Å—Ç–æ—Ä–∏—è</h1>
      </div>

      <div class="card">
        <div class="cardTitle">
          <h2>–†–µ–ª–∏–∑—ã –∏ –¥–∞–Ω–Ω—ã–µ</h2>
          <span class="pill" id="history-count">0</span>
        </div>
        <div id="history-list" class="list"></div>
        <div class="hint">–£–¥–∞–ª–µ–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏–µ–º —Ä–µ–ª–∏–∑–∞.</div>
      </div>

      <div class="modal" id="delete-modal" hidden>
        <div class="modalCard">
          <div class="cardTitle">
            <h3>–£–¥–∞–ª–µ–Ω–∏–µ —Ä–µ–ª–∏–∑–∞</h3>
            <button class="iconBtn" id="btn-close-delete-modal" title="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>
          </div>
          <div class="muted" style="margin-bottom:10px">
            –ß—Ç–æ–±—ã —É–¥–∞–ª–∏—Ç—å —Ä–µ–ª–∏–∑, –≤–≤–µ–¥–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é:
            <div style="margin-top:6px"><b id="delete-title">‚Äî</b></div>
          </div>
          <div class="field">
            <label>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</label>
            <input id="delete-confirm" placeholder="–í–≤–µ–¥–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–∞" />
          </div>
          <div class="row" style="margin-top:12px">
            <div class="spacer"></div>
            <button class="btn danger" id="btn-confirm-delete" disabled>–£–¥–∞–ª–∏—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞</button>
          </div>
        </div>
      </div>
    </section>

    <!-- REPORT -->
    <section class="page report-light" id="page-report">
      <div class="pageHead">
        <h1>–û—Ç—á—ë—Ç</h1>
        <div class="actions">
          <select id="report-release-select"></select>
          <button class="btn" id="btn-print" title="–û—Ç–∫—Ä–æ–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—É—é –ø–µ—á–∞—Ç—å">–ü–µ—á–∞—Ç—å / PDF</button>
          <button class="btn primary" id="btn-cloud-save" title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤–µ—Ä—Å–∏—é –æ—Ç—á—ë—Ç–∞ –≤ –æ–±–ª–∞–∫–µ">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
      </div>

      <div class="hint">
        –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—á–∞—Ç—å: –†–∞—Å–∫–ª–∞–¥–∫–∞: <b>–ê–ª—å–±–æ–º–Ω–∞—è</b>, –ë—É–º–∞–≥–∞: <b>A4</b>, –ü–æ–ª—è: <b>–ë–µ–∑ –ø–æ–ª–µ–π</b>.
      </div>

      <div id="report-root"></div>
    </section>

  </main>
  <script src="login.js"></script>
  <script src="app.js"></script>
</body>
</html>
